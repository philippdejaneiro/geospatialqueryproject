<head>
  <title>geospatial-query-project</title>
</head>

<body>
  <div class="container-fluid">
    <h1>Latest NDBC Observations</h1>
    {{> info}} {{> queryLocation}} {{> observationList}}
  </div>
</body>

<template name="info">
  <div class="alert alert-light" role="alert">
    {{obsImportMessage}}
  </div>
</template>

<template name="queryLocation">
  <div class="container-fluid">
    <form class="form-inline">
      <label class="my-1 mr-2" for="ex1">Longitude:</label>
      <input class="form-control mb-2 mr-sm-2"  type="number" name="lon" placeholder="Longitude" min="-180" max="180" step="0.1">
      <label class="my-1 mr-2" for="ex2">Latitude:</label>
      <input class="form-control mb-2 mr-sm-2" type="number" name="lat" placeholder="Latitude" min="-90" max="90" step="0.1">
      <label class="my-1 mr-2" for="ex3">Radius/miles:</label>
      <input class="form-control mb-2 mr-sm-2" type="number" name="rad" placeholder="Radius" min="0">
      <button type="submit" class="btn btn-primary mb-2">Query Observations in Radius</button>
    </form>
    <div>
      <button type="button" class="btn btn-secondary dummylocate">Set to dummy location</button>
      <button type="button" class="btn btn-secondary geolocate">Set to my Geolocation</button>
    </div>
  </div>
</template>

<template name="observationList">
  <div class="alert alert-light" role="alert">
    {{nearObservationsQueryStatus}}
  </div>
  <div class="panel-body">
      <div class="row">
        <table class="table table-condensed table-bordered">
          <tr>
            {{#each observationTitles}}
              {{> observationTitle}}
            {{/each}}
          </tr>
          <tbody>
            {{#each nearObservations}}
              {{> observationLine}}
            {{/each}}
          </tbody>
        </table>
      </div>
  </div>
</template>

<template name="observationTitle">
    <th>
      {{this}}
    </th>
</template>

<template name="observationLine">
  <tr>
    <td>
      {{this.stationId}}
    </td>
    <td>
      {{this.coordinates.[0]}}
    </td>
    <td>
      {{this.coordinates.[1]}}
    </td>
    <td>
      {{this.date}}
    </td><td>
    	{{this.WSPD}}
    </td>
    <td>
    	{{this.GST }}
    </td>
    <td>
    	{{this.WVHT}}
    </td>
    <td>
    	{{this.DPD }}
    </td>
    <td>
    	{{this.APD }}
    </td>
    <td>
    	{{this.MWD }}
    </td>
    <td>
    	{{this.PRES}}
    </td>
    <td>
    	{{this.PTDY}}
    </td>
    <td>
    	{{this.ATMP}}
    </td>
    <td>
    	{{this.WTMP}}
    </td>
    <td>
    	{{this.DEWP}}
    </td>
    <td>
    	{{this.VIS }}
    </td>
    <td>
    	{{this.TIDE}}
    </td>
  </tr>
</template>